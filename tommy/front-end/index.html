<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/js/all.min.js"></script>

    <script>




        (function () {
            let display_flag=0;
            function control_display(){
                if(display_flag==1){
                    $("#user-rem-box").css('display',"block");
                    $("#item-rem-box").css('display',"none");
                }else if(display_flag==2){
                    $("#user-rem-box").css('display',"none");
                    $("#item-rem-box").css('display',"block");
                }
            }

            $(document).ready(function(){
                $("#user-demo button").click(function(){

                    let url_user ="http://127.0.0.1:5000/topN/"+ $("#username").val();
                    console.log('topN')
                    $.ajax({
                        url:url_user,
                        type:"GET",
                        success: function (data) {
                            // var result = JSON.stringify(data);
                            console.log(data)
                            // console.log(data.items)
                            // result.items
                            $("#user-rem-box .user_id").text(data.username)
                            $("#user-rem-box .item-block .card-title").each(function (i,element) {
                                console.log($(this).text());
                                $(this).text(data.items[i]);
                                console.log($(this).text());
                            })
                            display_flag = 1;
                            control_display();
                        }
                    });

                });

                $("#item-demo button").click(function(){
                    let url_item ="http://127.0.0.1:5000/knn/1";
                    console.log('knn')
                    $.ajax({
                        url:url_item,
                        type:"GET",
                        success: function (data) {
                            // var result = JSON.stringify(data);
                            console.log(data)
                            display_flag = 2;
                            control_display();
                        }
                    });

                });
            });


        })();
    </script>
</head>
<body>
<!--<h1>testing</h1>-->
    <main class="container-fluid ">
        <div class="center ">
            <h1 class="text-center">recommend system</h1>
        </div>
        <div class="row">
            <!--frontend-->
            <div class="col-lg-5 ">
                <h2 class="text-center">demo</h2>
                <div id="user-demo" class="input-box" >
                    <form id="user-demo-form" class="form-inline center" >
                        <div class="form-group mx-sm-3 mb-2">
                            <label for="username" class="sr-only"></label>
                            <input type="text" class="form-control" id="username" placeholder="Username" value="ALOXOO497B4LH">
                        </div>
<!--                        <button type="button" class="btn btn-primary mb-2 " onclick="login()">Login</button>-->
                        <button type="button" class="btn btn-primary mb-2 " >Login</button>
                    </form>
                </div>
                <div id="item-demo" class="input-box" >
                    <form class="form-inline center" >
                        <div class="form-group mx-sm-3 mb-2">
                            <label for="username" class="sr-only"></label>
                            <input type="text" class="form-control" id="item_name" placeholder="item name">
                        </div>
                        <button type="button" class="btn btn-primary mb-2">Search</button>
                    </form>
                </div>

                <hr>
                <h3 class="center">recommend Top 3</h3>
<!--                <h5>you have not login, recommend default top 10</h5>-->
                <div id="user-rem-box" class="items-area">
                    <h5>Hi  <span class="user_id"></span>, recommend top 3 items to you~!</h5>
                    <div class="items-container row">
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>

                <div id="item-rem-box" class="items-area">
                    <h5>recommend to 5 similar items~!</h5>
                    <div class="items-container row">
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item-block col-sm-4 col-md-4 col-lg-4 ">
                            <div class="card" style="width: 100%">
                                <!--<img src="..." class="card-img-top" alt="...">-->
                                <img src="https://images-na.ssl-images-amazon.com/images/S/sgp-catalog-images/region_US/rlj-AMD10347000-Full-Image_GalleryBackground-en-US-1576124933450._SX1080_.jpg"  class="img-thumbnail" alt="">
                                <div class="card-body">
                                    <h5 class="card-title">Wire In The Blood</h5>
                                    <p class="card-text text-display">A clinical psychologist, Dr. Tony Hill, delves into his dark side to see into the minds of serial killers, to aid the police in solving their most difficult cases.</p>
                                    <div class="space-between">
                                        <a href="#" class="btn btn-primary btn-sm">more</a>
                                        <div class="like-icon">
                                            <i  class="fas fa-heart like"></i>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>


            <!--backend-->
            <div class="col-lg-7 green" ></div>
        </div>
    </main>

</body>

</html>